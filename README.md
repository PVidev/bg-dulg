# Външен дълг на България - Real-time Tracker

Приложение за проследяване на външния дълг на България и изчисляване на дълга на всеки гражданин. Показва колко трябва да върне всеки един гражданин за да се изплати дългът.

## Инсталация

```bash
npm install
```

## Стартиране

1. Инсталирай зависимостите (ако още не са инсталирани):
```bash
npm install
```

2. Стартирай development сървъра:
```bash
npm run dev
```

3. Отвори браузъра на [http://localhost:3000](http://localhost:3000)

Приложението автоматично ще зареди данните и ще покаже:
- **Общ външен дълг на България** - общата сума на външния дълг
- **Население** - текущото население на България
- **Дълг на човек** - сумата, която всеки гражданин трябва да върне за да се изплати дългът

**Забележка:** Ако има проблеми с порта 3000, можеш да промениш порта с:
```bash
npm run dev -- -p 3001
```

## Функционалности

- ✅ Показва общ външен дълг на България в USD
- ✅ Показва текущото население
- ✅ **Изчислява дълг на човек** - колко всеки гражданин трябва да върне
- ✅ **Актуални данни в реално време** - използва месечни данни от БНБ
- ✅ Автоматично обновяване на данните на всеки час
- ✅ Fallback данни ако API не работи (последни известни от БНБ)
- ✅ Модерен dark theme дизайн
- ✅ Responsive дизайн за мобилни устройства

## Използвани API и източници

### World Bank Open Data API

Приложението опитва да използва следните индикатори:

1. **Външен дълг:**
   - `DT.DOD.DECT.CD` - Total external debt stocks (current US$)
   - `GC.DOD.TOTL.GD.ZS` - Government debt % of GDP (алтернативен, изисква GDP данни)

2. **Население:**
   - `SP.POP.TOTL` - Total population

3. **GDP (за алтернативни изчисления):**
   - `NY.GDP.MKTP.CD` - GDP (current US$)

### БНБ (Българска народна банка) - Месечни данни

Приложението използва актуални месечни данни от БНБ като основен източник:
- **Външен дълг**: 53,605.9 млн. EUR (~57.9 милиарда USD) - август 2025 (47.7% от БВП)
- **Население**: ~6.8 милиона (2025)
- **Източник**: [БНБ прессъобщения](https://www.bnb.bg/AboutUs/PressOffice/POStatisticalPressReleases/POPRSGrossExternalDebt/)

БНБ публикува месечни данни за брутния външен дълг, които са най-актуалните налични данни.

#### Месечни данни от Excel и PDF файлове

Приложението използва директно извлечени данни от официални БНБ документи:
- **Excel файл**: `data/s_ged_press_a2_bg.xlsx` - детайлна таблица с данни по институционални сектори
- **PDF файлове**: Месечни прессъобщения (януари-август 2025) в папка `data/`
- **JSON файл**: `data/monthly-debt-data.json` - структурирани месечни данни за използване в приложението

Налични месечни данни:
- Август 2024: 44,590.66 млн. EUR
- Декември 2024: 49,826.92 млн. EUR
- Юли 2025: 53,784.85 млн. EUR
- Август 2025: 53,605.88 млн. EUR

Тези данни се зареждат автоматично и се показват в графиката с месечна резолюция.

### Fallback данни

Ако API данните не са налични, приложението използва последни известни данни от БНБ:
- Външен дълг: ~57.9 милиарда USD (53,605.9 млн. EUR, август 2025)
- Население: ~6.8 милиона (2025)

## Как работи изчислението

Дългът на човек се изчислява по формулата:

```
Дълг на човек = Общ външен дълг / Население
```

Например:
- Ако общият дълг е 45,000,000,000 USD
- И населението е 6,837,000 души
- Тогава всеки гражданин трябва да върне: 45,000,000,000 / 6,837,000 ≈ 6,581 USD

## Deployment на Vercel

Проектът е готов за deployment на Vercel. Следвай тези стъпки:

### 1. Инсталирай Vercel CLI (опционално)

```bash
npm i -g vercel
```

### 2. Deployment чрез Vercel Dashboard

1. Отиди на [vercel.com](https://vercel.com) и влез в акаунта си
2. Кликни на "New Project"
3. Свържи GitHub/GitLab/Bitbucket репозитория или качи проекта директно
4. Vercel автоматично ще разпознае Next.js проекта
5. Кликни "Deploy"

### 3. Deployment чрез Vercel CLI

```bash
# Влез в акаунта си
vercel login

# Deploy в production
vercel --prod
```

### 4. Важни бележки за Vercel

- ✅ **Файловете в `data/` папката** се включват автоматично в build
- ✅ **API routes** (`/api/debt`, `/api/debt/history`) работят като serverless функции
- ✅ **Максимално време за изпълнение**: 30 секунди (конфигурирано в `vercel.json`)
- ✅ **Автоматично HTTPS** и CDN оптимизация
- ✅ **Автоматично обновяване** при push в main branch (ако е свързан с Git)

### 5. Environment Variables (ако са нужни)

Ако в бъдеще се добавят API ключове или други секретни данни, можеш да ги добавиш в:
- Vercel Dashboard → Project Settings → Environment Variables

### 6. Build и Deploy настройки

Проектът използва стандартните Next.js build команди:
- **Build Command**: `npm run build` (автоматично)
- **Output Directory**: `.next` (автоматично)
- **Install Command**: `npm install` (автоматично)

Всички настройки са конфигурирани в `vercel.json`.

### 7. Проверка след deployment

След успешен deployment:
1. Проверявай дали API routes работят: `https://your-project.vercel.app/api/debt`
2. Проверявай дали данните се зареждат правилно
3. Проверявай конзолата за грешки в Vercel Dashboard → Functions

### 8. Обновяване на данните

За да обновиш месечните данни:
1. Добави нови PDF/Excel файлове в `data/` папката
2. Изпълни `scripts/extract-data.js` локално (ако е нужно)
3. Обнови `data/monthly-debt-data.json`
4. Push промените в Git
5. Vercel автоматично ще направи нов deployment

---

## Структура на проекта

```
BGN/
├── app/                    # Next.js App Router
│   ├── api/               # API routes
│   │   └── debt/         # Debt API endpoints
│   ├── page.tsx          # Главна страница
│   └── globals.css       # Глобални стилове
├── data/                  # Данни от БНБ
│   ├── *.pdf            # PDF прессъобщения
│   ├── *.xlsx           # Excel файлове
│   └── *.json           # Структурирани данни
├── scripts/              # Скриптове за обработка на данни
├── vercel.json           # Vercel конфигурация
└── package.json         # Зависимости
```

